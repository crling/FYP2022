{"ast":null,"code":"var treeHeight;\nvar nodeSeq;\nvar nodeList;\nexport function processTreeData(rootNode) {\n  nodeList = [];\n  treeHeight = 0;\n  nodeSeq = 0;\n  rootNode = computeNodePosition(rootNode);\n  rootNode.height = treeHeight;\n  return {\n    rootNode: rootNode,\n    nodeList: nodeList\n  };\n}\n\nfunction computeNodePosition(d) {\n  if (d.children) {\n    d.children[0].depth = d.depth + d.children[0].length;\n    d.children[1].depth = d.depth + d.children[1].length;\n    if (!d.children[0].position) d.children[0] = computeNodePosition(d.children[0]);\n    if (!d.children[1].position) d.children[1] = computeNodePosition(d.children[1]);\n    d.position = (d.children[0].position + d.children[1].position) / 2;\n  } else {\n    nodeList.push(d.name);\n    d.position = nodeSeq;\n\n    if (treeHeight === 0) {\n      treeHeight = d.depth;\n    }\n\n    nodeSeq++;\n  }\n\n  return d;\n}","map":{"version":3,"sources":["/Users/wangzhenyu/Desktop/fyp_workspace/meta_platform/app/javascript/viz/signed-heatmap/data.ts"],"names":["treeHeight","nodeSeq","nodeList","processTreeData","rootNode","computeNodePosition","height","d","children","depth","length","position","push","name"],"mappings":"AAAA,IAAIA,UAAJ;AACA,IAAIC,OAAJ;AACA,IAAIC,QAAJ;AAEA,OAAO,SAASC,eAAT,CAAyBC,QAAzB,EAAwC;AAC3CF,EAAAA,QAAQ,GAAG,EAAX;AACAF,EAAAA,UAAU,GAAG,CAAb;AACAC,EAAAA,OAAO,GAAG,CAAV;AACAG,EAAAA,QAAQ,GAAGC,mBAAmB,CAACD,QAAD,CAA9B;AACAA,EAAAA,QAAQ,CAACE,MAAT,GAAkBN,UAAlB;AACA,SAAO;AAACI,IAAAA,QAAQ,EAARA,QAAD;AAAWF,IAAAA,QAAQ,EAARA;AAAX,GAAP;AACH;;AAED,SAASG,mBAAT,CAA6BE,CAA7B,EAAqC;AACjC,MAAIA,CAAC,CAACC,QAAN,EAAgB;AACZD,IAAAA,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcC,KAAd,GAAsBF,CAAC,CAACE,KAAF,GAAUF,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcE,MAA9C;AACAH,IAAAA,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcC,KAAd,GAAsBF,CAAC,CAACE,KAAF,GAAUF,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcE,MAA9C;AACA,QAAI,CAACH,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcG,QAAnB,EAA6BJ,CAAC,CAACC,QAAF,CAAW,CAAX,IAAgBH,mBAAmB,CAACE,CAAC,CAACC,QAAF,CAAW,CAAX,CAAD,CAAnC;AAC7B,QAAI,CAACD,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcG,QAAnB,EAA6BJ,CAAC,CAACC,QAAF,CAAW,CAAX,IAAgBH,mBAAmB,CAACE,CAAC,CAACC,QAAF,CAAW,CAAX,CAAD,CAAnC;AAC7BD,IAAAA,CAAC,CAACI,QAAF,GAAa,CAACJ,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcG,QAAd,GAAyBJ,CAAC,CAACC,QAAF,CAAW,CAAX,EAAcG,QAAxC,IAAoD,CAAjE;AACH,GAND,MAMO;AACHT,IAAAA,QAAQ,CAACU,IAAT,CAAcL,CAAC,CAACM,IAAhB;AACAN,IAAAA,CAAC,CAACI,QAAF,GAAaV,OAAb;;AACA,QAAID,UAAU,KAAK,CAAnB,EAAuB;AACnBA,MAAAA,UAAU,GAAGO,CAAC,CAACE,KAAf;AACH;;AACDR,IAAAA,OAAO;AACV;;AACD,SAAOM,CAAP;AACH","sourcesContent":["let treeHeight: number;\nlet nodeSeq: number;\nlet nodeList: string[];\n\nexport function processTreeData(rootNode): any {\n    nodeList = [];\n    treeHeight = 0;\n    nodeSeq = 0;\n    rootNode = computeNodePosition(rootNode);\n    rootNode.height = treeHeight;\n    return {rootNode, nodeList};\n}\n\nfunction computeNodePosition(d): any {\n    if (d.children) {\n        d.children[0].depth = d.depth + d.children[0].length;\n        d.children[1].depth = d.depth + d.children[1].length;\n        if (!d.children[0].position) d.children[0] = computeNodePosition(d.children[0]);\n        if (!d.children[1].position) d.children[1] = computeNodePosition(d.children[1]);\n        d.position = (d.children[0].position + d.children[1].position) / 2;\n    } else {\n        nodeList.push(d.name);\n        d.position = nodeSeq;\n        if (treeHeight === 0 ) {\n            treeHeight = d.depth;\n        }\n        nodeSeq++;\n    }\n    return d;\n}\n"]},"metadata":{},"sourceType":"module"}