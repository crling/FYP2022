{"ast":null,"code":"function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { call, viz_mode } from \"page/visualizers\";\nimport { event } from \"crux/dist/utils\";\nvar vizLoaded = false;\nvar canvasMounted = false;\nvar packLoaded = false;\nvar currViz = null;\nvar outputsLoaded = false;\n\nfunction checkResource() {\n  var moduleName = window.gon.module_name;\n\n  if (window.__BVD3_visualizers[moduleName]) {\n    packLoaded = true;\n  }\n\n  if (document.getElementById(\"canvas\")) {\n    canvasMounted = true;\n  }\n\n  if (packLoaded && canvasMounted && !vizLoaded) {\n    if (window.gon.viz_mode === viz_mode.TASK_OUTPUT && !outputsLoaded) return;\n    vizLoaded = true;\n    var v = call(moduleName);\n\n    if (Array.isArray(v)) {\n      var _v = _slicedToArray(v, 2),\n          v_ = _v[0],\n          opt = _v[1];\n\n      currViz = v_;\n    } else {\n      if (v) currViz = v;\n    }\n  }\n}\n\nevent.on(event.CANVAS_READY, function () {\n  canvasMounted = true;\n  checkResource();\n});\nevent.on(\"bvd3-resource-loaded\", function () {\n  packLoaded = true;\n  checkResource();\n});\nevent.on(\"GMT:query-finished\", function () {\n  outputsLoaded = true;\n  checkResource();\n});\nevent.on(\"GMT:reset-query\", function () {\n  var canvas = document.getElementById(\"canvas\");\n\n  if (!canvas) {\n    return;\n  }\n\n  var svgElm = canvas.getElementsByTagName(\"svg\");\n  if (svgElm.length) svgElm[0].remove();\n  var canvasElm = canvas.getElementsByTagName(\"canvas\");\n  if (canvasElm.length) canvasElm[0].remove();\n  packLoaded = false;\n  canvasMounted = false;\n  vizLoaded = false;\n  outputsLoaded = false;\n});\ndocument.addEventListener(\"turbolinks:before-cache\", function () {\n  var canvas = document.getElementById(\"canvas\");\n\n  if (!canvas) {\n    return;\n  }\n\n  var svgElm = canvas.getElementsByTagName(\"svg\");\n  if (svgElm.length) svgElm[0].remove();\n  var canvasElm = canvas.getElementsByTagName(\"canvas\");\n  if (canvasElm.length) canvasElm[0].remove();\n  packLoaded = false;\n  canvasMounted = false;\n  vizLoaded = false;\n  outputsLoaded = false;\n});","map":{"version":3,"sources":["/Users/wangzhenyu/Desktop/fyp_workspace/meta_platform/app/javascript/packs/visualizer.js"],"names":["call","viz_mode","event","vizLoaded","canvasMounted","packLoaded","currViz","outputsLoaded","checkResource","moduleName","window","gon","module_name","__BVD3_visualizers","document","getElementById","TASK_OUTPUT","v","Array","isArray","v_","opt","on","CANVAS_READY","canvas","svgElm","getElementsByTagName","length","remove","canvasElm","addEventListener"],"mappings":";;;;;;;;;;;;AACA,SAASA,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,SAASC,KAAT,QAAsB,iBAAtB;AAEA,IAAIC,SAAS,GAAG,KAAhB;AACA,IAAIC,aAAa,GAAG,KAApB;AACA,IAAIC,UAAU,GAAG,KAAjB;AACA,IAAIC,OAAO,GAAG,IAAd;AACA,IAAIC,aAAa,GAAG,KAApB;;AAEA,SAASC,aAAT,GAAyB;AACrB,MAAMC,UAAU,GAAGC,MAAM,CAACC,GAAP,CAAWC,WAA9B;;AACA,MAAIF,MAAM,CAACG,kBAAP,CAA0BJ,UAA1B,CAAJ,EAA2C;AACvCJ,IAAAA,UAAU,GAAG,IAAb;AACH;;AACD,MAAIS,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAJ,EAAuC;AACnCX,IAAAA,aAAa,GAAG,IAAhB;AACH;;AACD,MAAIC,UAAU,IAAID,aAAd,IAA+B,CAACD,SAApC,EAA+C;AAC3C,QAAIO,MAAM,CAACC,GAAP,CAAWV,QAAX,KAAwBA,QAAQ,CAACe,WAAjC,IAAgD,CAACT,aAArD,EAAoE;AACpEJ,IAAAA,SAAS,GAAG,IAAZ;AACA,QAAMc,CAAC,GAAGjB,IAAI,CAACS,UAAD,CAAd;;AACA,QAAIS,KAAK,CAACC,OAAN,CAAcF,CAAd,CAAJ,EAAsB;AAAA,8BACAA,CADA;AAAA,UACXG,EADW;AAAA,UACPC,GADO;;AAElBf,MAAAA,OAAO,GAAGc,EAAV;AACH,KAHD,MAGO;AACH,UAAIH,CAAJ,EAAOX,OAAO,GAAGW,CAAV;AACV;AACJ;AACJ;;AAEDf,KAAK,CAACoB,EAAN,CAASpB,KAAK,CAACqB,YAAf,EAA6B,YAAM;AAC/BnB,EAAAA,aAAa,GAAG,IAAhB;AAAsBI,EAAAA,aAAa;AACtC,CAFD;AAGAN,KAAK,CAACoB,EAAN,CAAS,sBAAT,EAAiC,YAAM;AACnCjB,EAAAA,UAAU,GAAG,IAAb;AACAG,EAAAA,aAAa;AAChB,CAHD;AAIAN,KAAK,CAACoB,EAAN,CAAS,oBAAT,EAA+B,YAAK;AAChCf,EAAAA,aAAa,GAAG,IAAhB;AACAC,EAAAA,aAAa;AAChB,CAHD;AAIAN,KAAK,CAACoB,EAAN,CAAS,iBAAT,EAA4B,YAAM;AAC9B,MAAME,MAAM,GAAGV,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;;AACA,MAAI,CAACS,MAAL,EAAa;AAAE;AAAS;;AACxB,MAAMC,MAAM,GAAGD,MAAM,CAACE,oBAAP,CAA4B,KAA5B,CAAf;AACA,MAAID,MAAM,CAACE,MAAX,EAAmBF,MAAM,CAAC,CAAD,CAAN,CAAUG,MAAV;AACnB,MAAMC,SAAS,GAAGL,MAAM,CAACE,oBAAP,CAA4B,QAA5B,CAAlB;AACA,MAAIG,SAAS,CAACF,MAAd,EAAsBE,SAAS,CAAC,CAAD,CAAT,CAAaD,MAAb;AACtBvB,EAAAA,UAAU,GAAG,KAAb;AACAD,EAAAA,aAAa,GAAG,KAAhB;AACAD,EAAAA,SAAS,GAAG,KAAZ;AACAI,EAAAA,aAAa,GAAG,KAAhB;AACH,CAXD;AAYAO,QAAQ,CAACgB,gBAAT,CAA0B,yBAA1B,EAAqD,YAAM;AACvD,MAAMN,MAAM,GAAGV,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;;AACA,MAAI,CAACS,MAAL,EAAa;AAAE;AAAS;;AACxB,MAAMC,MAAM,GAAGD,MAAM,CAACE,oBAAP,CAA4B,KAA5B,CAAf;AACA,MAAID,MAAM,CAACE,MAAX,EAAmBF,MAAM,CAAC,CAAD,CAAN,CAAUG,MAAV;AACnB,MAAMC,SAAS,GAAGL,MAAM,CAACE,oBAAP,CAA4B,QAA5B,CAAlB;AACA,MAAIG,SAAS,CAACF,MAAd,EAAsBE,SAAS,CAAC,CAAD,CAAT,CAAaD,MAAb;AACtBvB,EAAAA,UAAU,GAAG,KAAb;AACAD,EAAAA,aAAa,GAAG,KAAhB;AACAD,EAAAA,SAAS,GAAG,KAAZ;AACAI,EAAAA,aAAa,GAAG,KAAhB;AACH,CAXD","sourcesContent":["\nimport { call, viz_mode } from \"page/visualizers\";\nimport { event } from \"crux/dist/utils\";\n\nlet vizLoaded = false;\nlet canvasMounted = false;\nlet packLoaded = false;\nlet currViz = null;\nlet outputsLoaded = false;\n\nfunction checkResource() {\n    const moduleName = window.gon.module_name;\n    if (window.__BVD3_visualizers[moduleName]) {\n        packLoaded = true;\n    }\n    if (document.getElementById(\"canvas\")) {\n        canvasMounted = true;\n    }\n    if (packLoaded && canvasMounted && !vizLoaded) {\n        if (window.gon.viz_mode === viz_mode.TASK_OUTPUT && !outputsLoaded) return;\n        vizLoaded = true;\n        const v = call(moduleName);\n        if (Array.isArray(v)) {\n            const [v_, opt] = v;\n            currViz = v_;\n        } else {\n            if (v) currViz = v;\n        }\n    }\n}\n\nevent.on(event.CANVAS_READY, () => { \n    canvasMounted = true; checkResource();\n});\nevent.on(\"bvd3-resource-loaded\", () => { \n    packLoaded = true; \n    checkResource(); \n});\nevent.on(\"GMT:query-finished\", ()=> {\n    outputsLoaded = true;\n    checkResource();\n});\nevent.on(\"GMT:reset-query\", () => {\n    const canvas = document.getElementById(\"canvas\");\n    if (!canvas) { return; }\n    const svgElm = canvas.getElementsByTagName(\"svg\");\n    if (svgElm.length) svgElm[0].remove();\n    const canvasElm = canvas.getElementsByTagName(\"canvas\");\n    if (canvasElm.length) canvasElm[0].remove();\n    packLoaded = false;\n    canvasMounted = false;\n    vizLoaded = false;\n    outputsLoaded = false;\n});\ndocument.addEventListener(\"turbolinks:before-cache\", () => {\n    const canvas = document.getElementById(\"canvas\");\n    if (!canvas) { return; }\n    const svgElm = canvas.getElementsByTagName(\"svg\");\n    if (svgElm.length) svgElm[0].remove();\n    const canvasElm = canvas.getElementsByTagName(\"canvas\");\n    if (canvasElm.length) canvasElm[0].remove();\n    packLoaded = false;\n    canvasMounted = false;\n    vizLoaded = false;\n    outputsLoaded = false;\n});\n\n"]},"metadata":{},"sourceType":"module"}