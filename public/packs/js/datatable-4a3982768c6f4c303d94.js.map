{"version":3,"file":"js/datatable-4a3982768c6f4c303d94.js","sources":["webpack:///webpack/bootstrap","webpack:///./app/javascript/packs/datatable.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/packs/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./app/javascript/packs/datatable.js\");\n","$(window).unload(function() {\n    $.rails.enableFormElements($($.rails.formSubmitSelector));\n  });\n\n$.fn.dataTable.ext.errMode = 'throw';\n\nfunction union(setA, setB) {\n    let _union = new Set(setA);\n    for (let elem of setB) {\n        _union.add(elem);\n    }\n    return _union;\n}\n\nfunction difference(setA, setB) {\n    let _difference = new Set(setA);\n    for (let elem of setB) {\n        _difference.delete(elem);\n    }\n    return _difference;\n}\n\nfunction intersection(setA, setB){\n    var intersection = new Set();\n    for (var elem of setB) {\n        if (setA.has(elem)) {\n            intersection.add(elem);\n        }\n    }\n    return intersection;\n\n}\n\nfunction modify_set(option, id_set, new_ids){\n    var new_ids = Array.from(new_ids);\n    var new_ids = new Set(new_ids)\n    if (option > 0) {\n        // add new ids\n        return union(id_set, new_ids);\n    }\n    else{\n        return difference(id_set, new Set(new_ids));\n    }\n}\n\n$(function () { \n    var ids = new Set();\n    var invis = window.gon.invis\n    //console.log($(\"#table_page\").data('url'));\n    var table = $(\"#table_page\").DataTable({\n        fixedColumns: true,\n        fixedColumns: {\n            leftColumns: 3,\n            rightColumns: 1\n        },\n        processing: true,\n        serverSide: true,\n        ajax: $(\"#table_page\").data('url'),\n        columnDefs: [\n        {\n            targets: 0,\n            orderable: false,\n            className: 'select-checkbox',\n            checkboxes: {\n                selectRow: true,\n            },\n        },\n        {\n            targets: -1,\n            orderable: false  \n        },\n        {\n            targets: invis,\n            visible: false\n        }\n        ],\n        searching: true,\n        select: {\n            style:    'multi',\n            selector: 'td:first-child'\n        },\n        scrollX: true,\n        rowCallback: function(row, data) {\n            if ( data[34] == \"<div class='table_cell'> YES </div>\" )\n            {\n                $('td:eq(8)', row).css('background-color', '#83FDC0');\n                \n            }\n            else if( data[34] == \"<div class='table_cell'> NO </div>\" )\n            {\n                $(row).find('td:eq(8)').css('background-color', '#FA9288');\n                \n            }\n            else{\n                //$(row).find('td:eq(7)').css('background-color', 'orange')\n            }         \n        }\n    }); \n\n\n    table.on('change', function() {\n        //console.log(\"clicking\");\n        // var info = table.fnSettings().aaSorting;\n        // var idx = info[0][0];\n        // alert(idx);\n    })\n\n    $(\"th.select-checkbox\").on('click',function(e) {\n        if ($(\".selectAll\").is( \":checked\" )) {\n            table.rows(  ).select(); \n        } else {\n            table.rows(  ).deselect(); \n        }\n    });\n\n    table.on(\"select\", function(e) {\n        var rows_selected = table.rows( { selected: true } ).data();//.column(0).data();\n        var selected_ids = rows_selected.map(function(value,index) { \n            return value[1];\n        });\n        ids = modify_set(1, ids, selected_ids);\n    });\n\n    table.on(\"deselect\", function(e) {\n        var rows_deselected = table.rows( { selected: false } ).data();//.column(0).data();\n        var deselected_ids = rows_deselected.map(function(value,index) { \n            return value[1];\n        });\n        ids = modify_set(-1, ids, deselected_ids);\n        //console.log(ids);\n    });\n\n    table.on(\"draw\", function(e) {\n        //console.log(\"predraw\");\n        var all_rows = table.rows().data();\n        var all_select = true;\n        if(all_rows.length==0){\n            all_select = false;\n        }\n        all_rows.map(function(row, index){\n            var id = row[0];\n            if (ids.has(id)){\n                table.row(index).select();\n            }\n            else{\n                all_select = false;\n            }\n        });\n        if(all_select){\n            $(\".selectAll\").prop('checked', true);\n        }\n        else{\n            $(\".selectAll\").prop('checked', false);\n        }\n        \n    });\n\n\n    $('.s_table_sub').on(\"click\", function(e){\n        var form = this;\n        var selected_ids = Array.from(ids)\n        // Iterate over all selected checkboxes\n        $.each(selected_ids, function(index, id){\n           // Create a hidden element\n           $(form).append(\n                $('<input>')\n                .attr('type', 'hidden')\n                .attr('name', 'selected_ids[]')\n                .val(id)\n            );\n        });\n        $(form).append(\n            $('<input>')\n                .attr('type', 'hidden')\n                .attr('name', 'search_value')\n                .val(table.search())\n        );\n        //console.log('submitting');\n    });\n\n    $('button.toggle-vis').on( 'click', function (e) {\n      e.preventDefault();\n      $(this).toggleClass('clicked');\n      // Get the column API object\n      var column = table.column( $(this).attr('data-column') );\n      // Toggle the visibility\n      column.visible( ! column.visible() );\n    } );\n\n} );\n\n\n\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAEA;AAAA;AACA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAEA;AAAA;AACA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAFA;AASA;AACA;AACA;AACA;AACA;AADA;AAJA;AASA;AACA;AAFA;AAKA;AACA;AAFA;AAOA;AACA;AAFA;AAMA;AAEA;AAEA;AAGA;AAEA;AAGA;AACA;AAIA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AAOA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;A","sourceRoot":""}